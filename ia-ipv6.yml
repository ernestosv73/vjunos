name: mcp-server
mgmt:
  network: mcp
  ipv4-subnet: 172.81.81.0/24

topology:
  nodes:
    
    srlrouter:
      kind: nokia_srlinux
      labels:
        graph-icon: router
      image: ghcr.io/nokia/srlinux:24.10.1
      type: ixrd3
      startup-config: router/config.json
      exec:
        - "sysctl -w net.ipv6.conf.e1-1.accept_ra=0"
    
    
    # Nokia SRL Linux Layer 2 Device
    srlswitch:
      kind: nokia_srlinux
      labels:
        graph-icon: switch
      image: ghcr.io/nokia/srlinux:24.10.1
      type: ixrd3
      startup-config: switch/srlswitch.cfg
    
       
    PC1:
      kind: linux
      image: esanchezv/kali-mcpserver:latest
      ports:
        - 8000:8000
      exec:
      - ip -6 route del default dev eth0  

    PC2:
      kind: linux
      image: docker.io/esanchezv/kaliipv6v2.2:latest
      exec:
      - ip -6 route del default dev eth0  
  
    PC3:
      kind: linux
      image: docker.io/esanchezv/kaliipv6v2.2:latest
      exec:
      - ip -6 route del default dev eth0  

    

  links:
    - endpoints: ["srlrouter:e1-1", "srlswitch:e1-1"]
    - endpoints: ["PC1:eth1", "srlswitch:e1-2"]
    - endpoints: ["PC2:eth1", "srlswitch:e1-3"]
    - endpoints: ["PC3:eth1", "srlswitch:e1-4"]

